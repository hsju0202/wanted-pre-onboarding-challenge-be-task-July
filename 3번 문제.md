(3) 웹 브라우저에 네이버 를 검색하고 화면에 네이버 화면이 출력이 될 때 까지 내부적으로 어떤 동작들이 수행이 되는지 설명해주세요.
-

클라이언트가 웹 브라우저에 네이버(www.naver.com) 를 입력하면 생기는 일

1. 우선 웹 브라우저는 www.naver.com 도메인의 IP를 찾아내기 위해 일련의 과정을 거친다.
   1. 브라우저 캐시를 확인한다.
   2. 운영체제 hosts 파일을 확인한다.
   3. DNS 서버에 IP를 찾을때까지 쿼리를 보낸다.

2. IP를 찾은 브라우저는 해당 IP로 https request를 보내기전에 연결 요청을 먼저 보낸다. (3-way handshake)
3. 이 요청은 각 TCP/IP 계층을 거쳐 분할과 변환이 일어난다.
   1. 전송 계층 - 요청이 segment 단위로 다중화 되어 나눠진다. 헤더에 port 번호 추가
   2. 네트워크 계층 - segment에 헤더를 붙여 packet을 만든다. 헤더에 출발지IP/목적지IP 추가. 이때 ARP로 MAC 주소를 가져온다.
   3. 데이터링크 계층 - packet에 헤더를 붙여 frame을 만든다. 헤더에 출발지MAC/목적지MAC 추가.
   4. 물리 계층 - frame을 전기적 신호로 변환하여 전선에 흘려보낸다.
  
4. 요청은 전선을 타고 라우터, 스위치 등을 거치면서 위와 같은 캡슐화, 역캡슐화를 반복하여 네이버 서버에 도착한다.
   - (네이버 서버 도착 전에 프록시 서버에 요청 결과가 캐싱 되어있었다면 프록시 서버까지만 간다.)
5. 연결 요청(SYN)을 받은 서버는 연결 요청(SYN)과 승인 응답(ACK)를 다시 클라이언트에게 보내고 세션에 클라이언트와의 연결을 저장한다.
6. 클라이언트는 다시 승인 응답(ACK)를 서버에 보내고 세션에 서버와의 연결을 저장한다.
7. 3-way handshake를 통한 연결이 완료된 클라이언트는 서버의 ssl 인증서를 받아온다.
8. 클라이언트는 인증기관에 서버 인증서의 신뢰성을 확인한다.
9. 신뢰성이 확인되면 대칭키를 발행한다.
10. 대칭키는 서버 인증서에 있는 공개키로 암호화하여 서버에게 전달한다.
11. 서버는 개인키로 암호화된 대칭키를 복호화한다.
12. 이제 클라이언트의 요청(네이버 페이지)과 요청에 대한 서버의 응답이 3번, 4번을 반복하여 웹 브라우저로 도착한다.
13. 이후 클라이언트와 서버는 4-way handshake를 통해 각자의 세션을 끊는다.
